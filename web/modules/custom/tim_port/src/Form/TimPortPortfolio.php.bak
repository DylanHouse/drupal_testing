<?php
/**
 * @file
 * Contains \Drupal\resume\Form\ResumeForm.
 */
namespace Drupal\tim_port\Form;

use Drupal\Core\Form\FormBase;
use Drupal\Core\Form\FormStateInterface;

class TimPortPortfolio  extends FormBase {
  /**
   * {@inheritdoc}
   */
  public function getFormId() {
    return 'resume_form';
  }
  /**
   * {@inheritdoc}
   */
  public function buildForm(array $form, FormStateInterface $form_state) {

	  $form['client_overview'] = array(
                        '#type' => 'table',
                        '#caption' => $this->t('Client Overview'),
                        //'#header' => array(
                                //$this->t('Name'),
                                //$this->t('Phone'),
                        //),
                );

                $form['client_overview'][1]['blank'] = array(
                );

                $form['client_overview'][1]['client_dropdown'] = array(
                        '#title' => t('Client'),
                        '#type' => 'select',
                        '#options' => array(t('Anna'), t('Bailey'),),
			'#empty_option' => $this->t('- Select a client -'),
			'#id' => 'client_select',
                        '#ajax' => [
                                'callback' => '::updateClient',
                                'wrapper' => 'data-wrapper',
                        ],

		);

		$form['client_overview'][2]['data_wrapper'] = [
			'#attributes' => ['id' => 'data-wrapper'],
		];

		$client_selected = $form_state->getValue('client_select');

		if (!empty($client_selected)) {
		        \Drupal::logger('tim_port')->error("Client Selected: ".$client_selected);
                        $form['client_overview'][2]['data_wrapper'] = [
				'#plain_text' => "Client: ".$client_selected,
			];
		}


                $form['client_overview'][]['colspan_example'] = array(
                        '#plain_text' => 'Colspan Example',
                        '#wrapper_attributes' => array(
                                'colspan' => 2,
                                'class' => array(
                                        'foo',
                                        'bar',
                                ),
                        ),
                );

    return $form;
  }

    /**
   * Ajax callback for the color dropdown.
   */
  public function updateClient(array $form, FormStateInterface $form_state) {
	  //\Drupal::logger('tim_port')->error("updateClient:");
    error_log($form);
    return $form['client_overview'][2]['data_wrapper'];
  }

  /**
   * {@inheritdoc}
   */
    public function validateForm(array &$form, FormStateInterface $form_state) {
      if (strlen($form_state->getValue('candidate_number')) < 10) {
        $form_state->setErrorByName('candidate_number', $this->t('Mobile number is too short.'));
      }
    }
  /**
   * {@inheritdoc}
   */
  public function submitForm(array &$form, FormStateInterface $form_state) {
   // drupal_set_message($this->t('@can_name ,Your application is being submitted!', array('@can_name' => $form_state->getValue('candidate_name'))));
    foreach ($form_state->getValues() as $key => $value) {
      drupal_set_message($key . ': ' . $value);
    }
   }
}
